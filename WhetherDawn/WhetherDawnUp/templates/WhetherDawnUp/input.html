{% extends "WhetherDawnUp/base.html" %}
{% block content %}
{% load static %}

<header class="dark-gray strip" id="cap" align="left">
    <div class="lozung"> Enjoy the sunlight </div>
    <div id="moscow">
        <script type="text/javascript">
drawMoscow();
setInterval( drawMoscow, 600000);
        </script>
    </div>
    <div id="peter">
        <script type="text/javascript">
var pdata = getWeatherData(498817, 0, 0);
setInterval( getWeatherData, 600000);
document.getElementById("peter").innerHTML  = getInfo(pdata);
        </script>
    </div>
    <div id="nurlat">
        <script type="text/javascript">
var ndata = getWeatherData(516716, 0, 0);
setInterval( getWeatherData, 600000);
document.getElementById("nurlat").innerHTML  = getInfo(ndata);
        </script>
    </div>
</header>

<div class="adorable strip">
    <div class="dark-gray" id="iodata">
        <form action="" method="post">
            {% csrf_token %}
            <div class="idata">
                {% for field in form %}
                <div class="idataitem">
                    {{ field.label_tag }} {{ field }}
                </div>
                {% endfor %}
                <div class="idataitem">
                    <input type=submit value='OK' id="ok"> </input>
                </div>
            </div>

            <div class="odata">
                <p>
                <br> Рассвет: {{ results.time_rise }} </br>
                <br> Sunset time:  {{ results.time_set }} </br>
                </p>
            </div>
        </form>
    </div>
    <!--<div class="window">-->
        <!--Have a nice day!-->
        <!--<div class="sun"> </div>-->
        <!--<div class="moon"> </div>-->
    <!--</div>-->
    <div>
     <canvas id="myCanvas" width="400px" height="400px"
                                       style="background-color:#333">
     </canvas>
     <script>
var canvas = document.getElementById("myCanvas");
var ctx = canvas.getContext("2d");
var radius = canvas.height / 2;
ctx.translate(radius, radius);
radius = radius * 0.9;
<!--drawClock();-->
setInterval(drawClock, 1000);

function drawClock() {
    drawFace(ctx, radius);
    var rise = "{{ results.time_rise }}";
    <!--var rise = 12;-->
    ctx.arc(0, 0, radius, Math.PI / 8, Math.PI / 4);
    ctx.fillStyle = '#900';
    ctx.fill();
    ctx.font = radius*0.15 + "px arial";
    ctx.textBaseline="middle";
    ctx.textAlign="center";
    ctx.fillText(rise, 100, 10);
    drawNumbers(ctx, radius);
    drawTime(ctx, radius);
}
function drawFace(ctx, radius) {
    ctx.arc(0, 0, radius, 0, 2 * Math.PI);
    ctx.fillStyle = "white";
    ctx.fill();
    ctx.beginPath();
    ctx.arc(0, 0, radius*0.1, 0, 2*Math.PI);
    ctx.fillStyle = '#333';
    ctx.fill();
}
function drawNumbers(ctx, radius) {
    var ang;
    var num;
    ctx.font = radius*0.15 + "px arial";
    ctx.textBaseline="middle";
    ctx.textAlign="center";
    for(num= 1; num < 25; num++){
        ang = num * Math.PI / 12;
        ctx.rotate(ang);
        ctx.translate(0, -radius*0.85);
        ctx.rotate(-ang);
        ctx.fillText(num.toString(), 0, 0);
        ctx.rotate(ang);
        ctx.translate(0, radius*0.85); ctx.rotate(-ang);
    }
}
function drawTime(ctx, radius){
    var now = new Date();
    var hour = now.getHours();
    var minute = now.getMinutes();
    var second = now.getSeconds();
    //hour
    hour=hour + minute / 60 + second / 3600;
    drawHand(ctx, hour, radius*0.8, radius*0.07);
}
function drawHand(ctx, pos, length, width) {
    ctx.beginPath();
    ctx.lineWidth = width;
    ctx.lineCap = "round";
    ctx.moveTo(0,0);
    ctx.rotate(pos);
    ctx.lineTo(0, -length);
    ctx.stroke();
    ctx.rotate(-pos);
}

     </script>
    </div>
</div>

{% endblock %}
